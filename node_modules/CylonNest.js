var Cylon = require('cylon');

module.exports = Cylon.robot({
  connections: {
    nest: { adaptor: 'nest', accessToken: 'c.Bx4x7cXaazIbaF4TPZ1fhzJddEKb6aS5NWCCqgdVvjAuNnlPMjFnB1maQUOehVRBoPdnrvJ7s5p81U8r7gOcij9dRRWVOFUtOa9oTfYh19dbewEXbAhPshsK2XaDpJg2KmdkdNO2VFDhSDYX' }
  },

  devices: {
    thermostat: { driver: 'nest-thermostat', deviceId: 'EKAd1Aig-TqlR7bjARkiydeWpNWKMP3z' }
  },

  work: function(my) {
    var go = true;
    every((0.1).seconds(), function(){
      var temp = my.thermostat.ambientTemperatureC();
      if (go) {
        go=false;
        console.log(temp);
        return temp;
      }
    });
  }
});
